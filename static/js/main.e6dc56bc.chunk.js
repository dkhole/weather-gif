(this["webpackJsonpweather-gif"]=this["webpackJsonpweather-gif"]||[]).push([[0],{10:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(2),c=a(4),s=a(5),o=a(8),l=a(7),u=a(0),p=a.n(u),m=a(6),h=a.n(m),y=(a(16),a(17)),d="6flguaZ4XstDNrv8tZpNurgUyFWCh3x6";function f(e){return e.hour.map((function(e,t){if(e){var a=new Date(1e3*e.dt),n=e.temp.toString().slice(0,2),r=e.weather[0].icon,i=a.toString().slice(16,21);return p.a.createElement("div",{className:"hourly-wrap",key:e.dt},p.a.createElement("div",{key:t+100,className:"hourly"},i),p.a.createElement("img",{key:t+200,className:"hourly-icon",alt:"weather icon",src:"https://openweathermap.org/img/wn/".concat(r,"@2x.png")}),p.a.createElement("div",{key:t,className:"hourly-temp"},n,"\u2103"))}return null}))}function g(e){return e.week.map((function(e,t){if(e){var a=new Date(1e3*e.dt),n=e.temp.day.toString().slice(0,2),r=e.weather[0].icon,i=a.toString().slice(0,3);return p.a.createElement("div",{className:"weekly-wrap",key:e.dt},p.a.createElement("div",{key:t+100,className:"weekly"},i),p.a.createElement("img",{key:t+200,className:"weekly-icon",alt:"daily icon",src:"https://openweathermap.org/img/wn/".concat(r,"@2x.png")}),p.a.createElement("div",{key:t,className:"weekly-temp"},n,"\u2103"))}return null}))}function v(e){return p.a.createElement("div",{className:"wrapper",style:{zIndex:e.zIndex,backgroundColor:e.bgCol}},p.a.createElement("div",{id:"city-title"},e.city),p.a.createElement("div",{className:"temp"},e.temp,"\u2103"),p.a.createElement("div",{className:"main-icon"},p.a.createElement("img",{id:"current-icon",alt:"icon",src:e.currentIcon})),p.a.createElement("div",{className:"min"},"min ",e.min,"\u2103"),p.a.createElement("div",{className:"max"},"max ",e.max,"\u2103"),p.a.createElement("div",{className:"feels-like"},"feels like ",e.feelsLike,"\u2103"),p.a.createElement("div",{className:"description"},e.description),p.a.createElement("div",{className:"hourly-title"},"Hourly"),p.a.createElement("div",{className:"hourly-wrapper"},p.a.createElement(f,{hour:e.hourly})),p.a.createElement("div",{className:"weekly-title"},"Week"),p.a.createElement("div",{className:"weekly-wrapper"},p.a.createElement(g,{week:e.weekly})))}function k(e){return p.a.createElement("span",{onClick:e.onClick},"X")}function w(e){return e.cityList.map((function(t,a){return p.a.createElement("div",{className:"cities",onClick:function(t){return e.onClick(t)},key:a},t,p.a.createElement(k,{onClick:function(){return e.handleDel(t)}}))}))}var b=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this)).state={country:"country",city:"",temp:0,min:0,max:0,feelsLike:0,hourly:Array(7).fill(null),weekly:Array(8).fill(null),currentIcon:"",cityList:[],zIndex:-1,gif:"",bgCol:"var(--weather-bg-color)",description:""},n}return Object(s.a)(a,[{key:"processAPI",value:function(e,t,a,n,r,i){var c=e.main.temp_min,s=parseInt(c),o=e.main.temp_max,l=parseInt(o),u=parseInt(e.main.feels_like),p=t.hourly.slice(0,7),m=t.daily.slice(1),h="https://openweathermap.org/img/wn/".concat(e.weather[0].icon,"@2x.png"),y=n.charAt(0).toUpperCase()+n.slice(1),d=this.state.cityList.slice(),f=y+", "+r;d.includes(f)||(d=d.concat([f]),localStorage.setItem("cityList",JSON.stringify(d))),this.setState({country:r,city:n,temp:e.main.temp,min:s,max:l,feelsLike:u,hourly:p,weekly:m,currentIcon:h,cityList:d,zIndex:0,gif:a.data.images.original.url,bgCol:"var(--weather-bg-color)",description:i})}},{key:"weatherCity",value:function(){var e=Object(i.a)(r.a.mark((function e(t){var a,n,i,c,s,o,l,u,p,m;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.openweathermap.org/data/2.5/weather?q=".concat(t,"&units=metric&appid=6b6a481228e382e26d9b7d7b23154bf7"),{mode:"cors"});case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,i=n.coord.lat,c=n.coord.lon,s=n.sys.country,o=n.weather[0].description,e.next=13,fetch("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(i,"&lon=").concat(c,"&units=metric&exclude=current,minutely&appid=6b6a481228e382e26d9b7d7b23154bf7"),{mode:"cors"});case 13:return l=e.sent,e.next=16,l.json();case 16:return u=e.sent,e.next=19,fetch("https://api.giphy.com/v1/gifs/translate?api_key=".concat(d,"&s=").concat(o,"&weirdness=").concat(0),{mode:"cors"});case 19:return p=e.sent,e.next=22,p.json();case 22:m=e.sent,this.processAPI(n,u,m,t,s,o),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(0),alert("cant find locationheere");case 29:case"end":return e.stop()}}),e,this,[[0,26]])})));return function(t){return e.apply(this,arguments)}}()},{key:"weatherCityCountry",value:function(){var e=Object(i.a)(r.a.mark((function e(t,a){var n,i,c,s,o,l,u,p,m,h,f,g,v;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n="",!(a.length>2)){e.next=11;break}if(i=a.charAt(0).toUpperCase()+a.slice(1),c=y.byCountry(i)){e.next=8;break}return prompt("cant find country"),e.abrupt("return");case 8:n=c.iso2,e.next=16;break;case 11:if(s=y.byIso(a.toUpperCase())){e.next=15;break}return prompt("cant find country"),e.abrupt("return");case 15:n=s.iso2;case 16:return e.next=18,fetch("https://api.openweathermap.org/data/2.5/weather?q=".concat(t,",").concat(n,"&units=metric&appid=6b6a481228e382e26d9b7d7b23154bf7"),{mode:"cors"});case 18:return o=e.sent,e.next=21,o.json();case 21:return l=e.sent,u=l.coord.lat,p=l.coord.lon,m=l.weather[0].description,e.next=27,fetch("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(u,"&lon=").concat(p,"&units=metric&exclude=current,minutely&appid=6b6a481228e382e26d9b7d7b23154bf7"),{mode:"cors"});case 27:return h=e.sent,e.next=30,h.json();case 30:return f=e.sent,e.next=33,fetch("https://api.giphy.com/v1/gifs/translate?api_key=".concat(d,"&s=").concat(m,"&weirdness=").concat(0),{mode:"cors"});case 33:return g=e.sent,e.next=36,g.json();case 36:v=e.sent,this.processAPI(l,f,v,t,n,m),e.next=43;break;case 40:e.prev=40,e.t0=e.catch(0),alert("cant find location");case 43:case"end":return e.stop()}}),e,this,[[0,40]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getWeather",value:function(e,t){if(e||t)t?this.weatherCityCountry(e,t):this.weatherCity(e);else{var a=this.state.cityList[0];if(a){var n=a.slice(0,a.length-4).toLowerCase(),r=a.slice(a.length-2,a.length).toLowerCase();this.weatherCityCountry(n,r)}}}},{key:"search",value:function(e){var t=document.getElementById("city-input"),a=document.getElementById("country-input");if(this.setState({zIndex:-1,bgCol:"rgb(0,51,78)"}),!t.value&&!a.value||!t.value)return alert("At least a city is required");this.getWeather(t.value,a.value),t.value="",a.value=""}},{key:"pickCity",value:function(e){e.stopPropagation(),this.setState({zIndex:-5,bgCol:"rgb(0,51,78)"});var t=e.target.textContent,a=t.length,n=t.slice(a-3,a-1).toLowerCase(),r=t.slice(0,a-5).toLowerCase();this.getWeather(r,n)}},{key:"delCity",value:function(e){var t=this.state.cityList.slice();console.log(e);var a=t.indexOf(e);a>-1&&(t.splice(a,1),localStorage.setItem("cityList",JSON.stringify(t)),prompt(t),this.setState({cityList:t}))}},{key:"componentDidMount",value:function(){if(localStorage.getItem("cityList")){var e=JSON.parse(localStorage.getItem("cityList"));if(e[0]){var t=e[0],a=t.slice(0,t.length-4).toLowerCase(),n=t.slice(t.length-2,t.length).toLowerCase();this.getWeather(a,n),this.setState({cityList:e})}}else this.getWeather("eastwood","australia")}},{key:"render",value:function(){var e=this,t={backgroundImage:"url(".concat(this.state.gif,")")};return p.a.createElement("div",{id:"app"},p.a.createElement("div",{id:"cities-wrapper"},"History",p.a.createElement(w,{cityList:this.state.cityList,onClick:function(t){e.pickCity(t)},handleDel:function(t){return e.delCity(t)}})),p.a.createElement("div",{id:"input-wrapper"},p.a.createElement("input",{type:"text",id:"country-input",placeholder:"Country"}),p.a.createElement("input",{type:"text",id:"city-input",placeholder:"City"}),p.a.createElement("input",{type:"button",id:"submit",value:"submit",onClick:function(t){return e.search(t)}})),p.a.createElement("div",{id:"overlay"},p.a.createElement("div",{id:"background-overlay",style:t}),p.a.createElement(v,{country:this.state.country,city:this.state.city,temp:this.state.temp,currentIcon:this.state.currentIcon,min:this.state.min,max:this.state.max,feelsLike:this.state.feelsLike,hourly:this.state.hourly,weekly:this.state.weekly,zIndex:this.state.zIndex,bgCol:this.state.bgCol,description:this.state.description})))}}]),a}(p.a.Component);h.a.render(p.a.createElement(b,null),document.getElementById("root"))},16:function(e,t,a){},9:function(e,t,a){e.exports=a(10)}},[[9,1,2]]]);
//# sourceMappingURL=main.e6dc56bc.chunk.js.map